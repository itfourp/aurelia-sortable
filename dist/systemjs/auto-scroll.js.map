{"version":3,"sources":["../../src/auto-scroll.js"],"names":["transient","AutoScroll","rAFId","speed","active","start","update","element","dirX","dirY","frameCntX","frameCntY","cancelAnimationFrame","scrollDeltaX","scrollDeltaY","autoScroll","scrollLeft","scrollTop","requestAnimationFrame","end","cAF"],"mappings":";;;;;;;;;;;;;;;AAAQA,e,+BAAAA,S;;;4BAGKC,U,WADZD,W;;;;eAECE,K,GAAQ,CAAC,C;eACTC,K,GAAQ,E;eACRC,M,GAAS,K;;;6BAETC,K,oBAAkB;AAAA,cAAZF,KAAY,yDAAJ,EAAI;;AAChB,eAAKA,KAAL,GAAaA,KAAb;AACD,S;;6BACDG,M,mBAAOC,O,EAASC,I,EAAMC,I,EAAMC,S,EAAWC,S,EAAW;AAAA;;AAChD,cAAI,KAAKP,MAAT,EAAiB;AACf,gBAAII,SAAS,CAAT,IAAcC,SAAS,CAA3B,EAA8B;AAC5BG,mCAAqB,KAAKV,KAA1B;AACA,mBAAKE,MAAL,GAAc,KAAd;AACD;AACD;AACD;AACD,cAAII,SAAS,CAAT,IAAcC,SAAS,CAA3B,EAA8B;AAC5B;AACD;;AAED,cAAIC,cAAc,CAAd,IAAmBC,cAAc,CAArC,EAAwC;AACtC;AACD;;AAED,cAAME,eAAeL,OAAO,KAAKL,KAAjC;AACA,cAAMW,eAAeL,OAAO,KAAKN,KAAjC;;AAEA,cAAMY,aAAa,SAAbA,UAAa,GAAM;;AAEvB,gBAAK,CAAC,MAAKX,MAAX,EAAoB;AAClB;AACD;AACD,gBAAIM,YAAY,CAAhB,EAAmB;AACjBH,sBAAQS,UAAR,IAAsBH,YAAtB;AACD;AACD,gBAAIF,YAAY,CAAhB,EAAmB;AACjBJ,sBAAQU,SAAR,IAAqBH,YAArB;AACD;;AAED,cAAEJ,SAAF;AACA,cAAEC,SAAF;AACA,gBAAID,aAAa,CAAb,IAAkBC,aAAa,CAAnC,EAAsC;AACpC,oBAAKP,MAAL,GAAc,KAAd;AACA;AACD;;AAED,kBAAKF,KAAL,GAAagB,sBAAsBH,UAAtB,CAAb;AACD,WApBD;;AAsBA,eAAKX,MAAL,GAAc,IAAd;AACAW;AACD,S;;6BACDI,G,kBAAgC;AAAA,cAA5BC,GAA4B,yDAAtBR,oBAAsB;;AAC9BQ,cAAI,KAAKlB,KAAT;AACA,eAAKE,MAAL,GAAc,KAAd;AACD,S","file":"auto-scroll.js","sourcesContent":["import {transient} from \"aurelia-dependency-injection\";\r\n\r\n@transient()\r\nexport class AutoScroll {\r\n  rAFId = -1;\r\n  speed = 10;\r\n  active = false;\r\n\r\n  start(speed = 10) {\r\n    this.speed = speed;\r\n  }\r\n  update(element, dirX, dirY, frameCntX, frameCntY) {\r\n    if (this.active) {\r\n      if (dirX === 0 && dirY === 0) {\r\n        cancelAnimationFrame(this.rAFId);\r\n        this.active = false;\r\n      }\r\n      return;\r\n    }\r\n    if (dirX === 0 && dirY === 0) {\r\n      return;\r\n    }\r\n\r\n    if (frameCntX === 0 && frameCntY === 0) {\r\n      return;\r\n    }\r\n\r\n    const scrollDeltaX = dirX * this.speed;\r\n    const scrollDeltaY = dirY * this.speed;\r\n\r\n    const autoScroll = () => {\r\n\r\n      if ( !this.active ) {\r\n        return;\r\n      }\r\n      if (frameCntX > 0) {\r\n        element.scrollLeft += scrollDeltaX;\r\n      }\r\n      if (frameCntY > 0) {\r\n        element.scrollTop += scrollDeltaY;\r\n      }\r\n\r\n      --frameCntX;\r\n      --frameCntY;\r\n      if (frameCntX <= 0 && frameCntY <= 0) {\r\n        this.active = false;\r\n        return;\r\n      }\r\n\r\n      this.rAFId = requestAnimationFrame(autoScroll);\r\n    };\r\n\r\n    this.active = true;\r\n    autoScroll();\r\n  }\r\n  end(cAF = cancelAnimationFrame) {\r\n    cAF(this.rAFId);\r\n    this.active = false;\r\n  }\r\n}\r\n"]}